window.bt_bb_parse_data=function(b){window.bt_bb_parse_data_str="";if(b.children.length>0){bt_bb_parse_data_helper(b);jQuery("#post_content").val(window.bt_bb_parse_data_str)}};window.bt_bb_copy=function(b,_){if(window.bt_bb_cb_items>1){for(var t=2;t<=window.bt_bb_cb_items;t++){localStorage.removeItem("bt_bb_light_cb_"+t+window.bt_bb_light_post_type)}}var b=bt_bb_get_obj_by_id(b,_);localStorage.setItem("bt_bb_light_cb_1"+window.bt_bb_light_post_type,JSON.stringify(b));bt_bb_set_number_items(1)};window.bt_bb_copy_plus=function(b,_){var t=bt_bb_get_obj_by_id(b,_);if(window.bt_bb_cb_items==0){localStorage.setItem("bt_bb_light_cb_1"+window.bt_bb_light_post_type,JSON.stringify(t));bt_bb_set_number_items(1)}else{var e=JSON.parse(localStorage.getItem("bt_bb_light_cb_1"+window.bt_bb_light_post_type));var i=false;if(t.p_base!==undefined){i=bt_bb_allowed(e.base,t.p_base)}else if(window.bt_bb_map[t.base].root!==undefined&&window.bt_bb_map[e.base].root!==undefined){i=true}if(i){window.bt_bb_cb_items++;localStorage.setItem("bt_bb_light_cb_"+window.bt_bb_cb_items+window.bt_bb_light_post_type,JSON.stringify(t));bt_bb_set_number_items(window.bt_bb_cb_items)}else{alert(window.bt_bb_text.not_allowed)}}};window.bt_bb_paste=function(b,_){if(window.bt_bb_cb_items>0){var t=bt_bb_get_obj_by_id(b,_);var e=JSON.parse(localStorage.getItem("bt_bb_light_cb_1"+window.bt_bb_light_post_type));if(window.bt_bb_map[t.base].root!==undefined&&window.bt_bb_map[e.base].root!==undefined){for(var i=window.bt_bb_cb_items;i>=1;i--){e=JSON.parse(localStorage.getItem("bt_bb_light_cb_"+i+window.bt_bb_light_post_type));e=bt_bb_set_new_keys(e);bt_bb_insert_after(b,_,e)}}else if(bt_bb_allowed(e.base,t.p_base)){for(var i=window.bt_bb_cb_items;i>=1;i--){e=JSON.parse(localStorage.getItem("bt_bb_light_cb_"+i+window.bt_bb_light_post_type));e=bt_bb_set_new_keys(e);bt_bb_insert_after(b,_,e)}}else if(bt_bb_allowed(e.base,t.base)){for(var i=1;i<=window.bt_bb_cb_items;i++){e=JSON.parse(localStorage.getItem("bt_bb_light_cb_"+i+window.bt_bb_light_post_type));e=bt_bb_set_new_keys(e);bt_bb_insert_inside(b,_,e)}}else{alert(window.bt_bb_text.not_allowed)}}};window.bt_bb_paste_main_toolbar=function(){var b=JSON.parse(localStorage.getItem("bt_bb_light_cb_1"+window.bt_bb_light_post_type));if(window.bt_bb_map[b.base].root!==undefined){for(var _=1;_<=window.bt_bb_cb_items;_++){b=JSON.parse(localStorage.getItem("bt_bb_light_cb_"+_+window.bt_bb_light_post_type));b=bt_bb_set_new_keys(b);window.bt_bb_state_current.children.push(b)}bt_bb_event("refresh")}else{alert(window.bt_bb_text.not_allowed)}};window.bt_bb_set_number_items=function(b){localStorage.setItem("bt_bb_light_cb_items"+window.bt_bb_light_post_type,b);jQuery(".bt_bb_cb_items").html(b);window.bt_bb_cb_items=b};jQuery(document).ready(function(){var b=jQuery;b("#save").on("click",function(_){window.bt_bb_action="update_wp_editor";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event");b("#publishing-action .spinner").css("visibility","visible")});b("i.bt_bb_save").on("click",function(_){b("#save").click()});b(".bt_bb_item_list").on("bt_bb_event",function(){b("#save").prop("disabled",false);b("i.bt_bb_save").removeClass("bt_bb_disabled")});window.bt_bb_cb_items=localStorage.getItem("bt_bb_light_cb_items"+window.bt_bb_light_post_type);if(window.bt_bb_cb_items===null)window.bt_bb_cb_items=0;b("#bt_bb_dialog .bt_bb_button_export").off("click");b("#bt_bb_dialog .bt_bb_button_import").off("click");b("#bt_bb_dialog").on("click",".bt_bb_button_export",function(_){if(window.bt_bb_cb_items>0){var t="[";for(var e=1;e<=window.bt_bb_cb_items;e++){t+='{"bt_bb_cb":"'+b64EncodeUnicode(encodeURIComponent(localStorage.getItem("bt_bb_light_cb_"+e+window.bt_bb_light_post_type)))+'"},'}t=t.substring(0,t.length-1);t+="]";b(".bt_bb_impex_input").val(b64EncodeUnicode(encodeURIComponent(t)));b(".bt_bb_impex_input").select()}});b("#bt_bb_dialog").on("click",".bt_bb_button_import",function(_){if(b(".bt_bb_impex_input").val()){bt_bb_cb_import(b(".bt_bb_impex_input").val())}});window.bt_bb_cb_import=function(b){var _=decodeURIComponent(b64DecodeUnicode(b));var t=JSON.parse(_);for(var e=1;e<=t.length;e++){localStorage.setItem("bt_bb_light_cb_"+e+window.bt_bb_light_post_type,decodeURIComponent(b64DecodeUnicode(t[e-1].bt_bb_cb)));bt_bb_set_number_items(t.length)}}});