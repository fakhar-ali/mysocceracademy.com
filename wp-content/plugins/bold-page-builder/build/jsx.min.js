"use strict";window.bt_bb={};window.bt_bb.cache={};window.bt_bb.min_width=200;window.bt_bb.padding=10;window.bt_bb_state=[];window.bt_bb_state_pointer=-1;window.bt_bb_state_current=null;window.bt_bb_dirty=false;(function(t){var e=BTReact.createClass({render:function(){var b="";var _="bt_bb_wrap";var i="bt_bb_item";var n="";if(this.props.data.has_alert!==undefined){i=i+" bt_bb_item_alert"}if(this.props.data.extra_class!==undefined){i=i+" "+this.props.data.extra_class}if(window.bt_bb_map[this.props.data.base]!==undefined){if(window.bt_bb_map[this.props.data.base].container!==undefined){if(window.bt_bb_map[this.props.data.base].container=="horizontal"){b="bt_bb_horizontal"}}if(window.bt_bb_map[this.props.data.base].highlight!==undefined){if(window.bt_bb_map[this.props.data.base].highlight===true){i=i+" bt_bb_item_highlight"}}if(window.bt_bb_map[this.props.data.base].icon!==undefined){i=i+" "+"bt_bb_icon"+" "+window.bt_bb_map[this.props.data.base].icon}if(window.bt_bb_map[this.props.data.base].width_param!==undefined){if(this.props.data.attr!==undefined){var o=JSON.parse(this.props.data.attr);var d=o[window.bt_bb_map[this.props.data.base].width_param];if(d!==undefined){d=d.split("/");d=Math.round(12*d[0]/d[1]);_=_+" "+"bt_bb_is_width bt_bb_width bt_bb_width"+d}}}}var s=this.props.data.key;var r=this.props.data.base;var l=this.props.data.children.map(function(t,b){if(t.key===undefined){t.key="bt_bb_"+bt_bb_get_key()}return BTReact.createElement(e,{key:t.key,data:t,p_key:s,p_base:r})});this.props.data["p_key"]=this.props.p_key;this.props.data["p_base"]=this.props.p_base;if(this.props.data.base=="_content"){return BTReact.createElement("div",{className:_},BTReact.createElement("div",{className:i,"data-base":this.props.data.base},BTReact.createElement("div",{className:"bt_bb_toolbar"},"]...[",BTReact.createElement(a,{has_params:"true"})),BTReact.createElement("div",{className:"bt_bb_content",dangerouslySetInnerHTML:{__html:window.switchEditors.wpautop(this.props.data.content)}})))}else{var c=window.bt_bb_map[this.props.data.base]!==undefined&&window.bt_bb_map[this.props.data.base].params!==undefined&&window.bt_bb_map[this.props.data.base].params.length>0?"true":"false";var p="";if(c=="true"){var w=bt_bb_get_param(this.props.data.base,"params");var m=false;var f="";for(var h=0;h<w.length;h++){if(w[h].preview!==undefined||w[h].holder!==undefined&&w[h].holder!=""){var u="";if(this.props.data.attr!==undefined){var o=JSON.parse(this.props.data.attr)}if(this.props.data.attr!==undefined&&o[w[h].param_name]!==undefined){u=o[w[h].param_name]}else{if(w[h].type=="checkbox"||w[h].type=="checkbox_group"){if(w[h].default!==undefined){u=w[h].default}else{u=""}}else if(typeof w[h].value=="object"){if(w[h].default!==undefined){u=w[h].default}else{var v=Object.keys(w[h].value);u=w[h].value[v[0]]}}else if(w[h].value!==undefined){u=w[h].value}}if(w[h].type=="attach_image"&&!m){var f=this.props.data.key;var g=u;var y=localStorage.getItem("bt_bb_cache_"+g);if(y!==null){if(window.bt_bb.cache[g]===undefined){window.bt_bb.cache[g]={}}window.bt_bb.cache[g].url=y}if(g==""){t("."+f+">"+".bt_bb_toolbar").css("background-image","")}else if(window.bt_bb.cache[g]!==undefined){setTimeout(function(){t("."+f+">"+".bt_bb_toolbar").css("background-image","url("+window.bt_bb.cache[g].url+")")},100)}else{t(window).load(function(){wp.media.ajax({data:{action:"get-attachment",id:g}}).done(function(e,b,a){if(e.sizes!==undefined){var _="";if(e.sizes.thumbnail!==undefined){_=e.sizes.thumbnail.url}else if(e.sizes.full!==undefined){if(e.sizes.full.width<=300&&e.sizes.full.height<=300){_=e.sizes.full.url}}if(_!=""){t("."+f+">"+".bt_bb_toolbar").css("background-image","url("+_+")");window.bt_bb.cache[e.id]={};window.bt_bb.cache[e.id].url=_;localStorage.setItem("bt_bb_cache_"+e.id,_)}else{localStorage.removeItem("bt_bb_cache_"+e.id)}}})})}u="";m=true}if(w[h].type=="iconpicker"){if(typeof u=="string"&&u!=""){var k=u;var x=k.slice(0,-5);var C=k.substr(-4);u='<span class="bt_bb_icon_preview bt_bb_icon_preview_'+x+'" data-icon-code="&#x'+C+'"></span>'}else{u=""}}else if(w[h].type=="colorpicker"){u='<span style="color:'+u+';font-weight: bold;">'+u+"</span>"}else if(w[h].type=="textarea_object"){try{u=b64DecodeUnicode(u)}catch(t){}}else{if(window["bt_bb_cf_"+w[h].type+"_param_value_preview"]!==undefined){u=window["bt_bb_cf_"+w[h].type+"_param_value_preview"](u)}}if(w[h].preview_strong!==undefined){u='<span class="bt_bb_preview_strong">'+u+"</span>"}else{u='<span class="bt_bb_preview_normal">'+u+"</span>"}p=p+bt_bb_special_char_decode(u)}}}var S=window.bt_bb_map[this.props.data.base]!==undefined&&window.bt_bb_map[this.props.data.base].toggle==true>0?"true":"false";var O=this.props.data.base;if(window.bt_bb_map[this.props.data.base]!==undefined&&window.bt_bb_map[this.props.data.base].name!==undefined&&window.bt_bb_settings.tag_as_name!="1"){O=window.bt_bb_map[this.props.data.base].name}p='<span class="bt_bb_preview_name">'+O+"</span>"+p;if(m){i=i+" bt_bb_image_preview "+f}if(window.bt_bb_map[this.props.data.base]!==undefined&&window.bt_bb_map[this.props.data.base].container!==undefined){var E=window.bt_bb_map[this.props.data.base].container;return BTReact.createElement("div",{className:_},BTReact.createElement("div",{className:i,"data-base":this.props.data.base,"data-container":E},BTReact.createElement("div",{className:"bt_bb_toolbar"},BTReact.createElement("span",{className:"bt_bb_preview",dangerouslySetInnerHTML:{__html:p}}),BTReact.createElement(a,{container:E,mapped:"true",has_params:c,toggle:S})),BTReact.createElement("div",{className:b},l)))}else{var T=window.bt_bb_map[this.props.data.base];var N="bt_bb_toolbar";var z="true";if(T==undefined||T.is_mapped===false){z="false";window.bt_bb_map[this.props.data.base]={};window.bt_bb_map[this.props.data.base].is_mapped=false;window.bt_bb_map[this.props.data.base].show_settings_on_create=false;window.bt_bb_map[this.props.data.base].base=this.props.data.base;window.bt_bb_map[this.props.data.base].description=this.props.data.base;window.bt_bb_map[this.props.data.base].name=this.props.data.base;window.bt_bb_map[this.props.data.base].params=[];N="bt_bb_toolbar bt_bb_alert"}return BTReact.createElement("div",{className:_},BTReact.createElement("div",{className:i,"data-base":this.props.data.base},BTReact.createElement("div",{className:N},p!=""?BTReact.createElement("span",{className:"bt_bb_preview",dangerouslySetInnerHTML:{__html:p}}):"",BTReact.createElement(a,{has_params:c,toggle:S,mapped:z})),BTReact.createElement("div",{className:b},l)))}}}});var b=BTReact.createClass({getInitialState:function(){return{data:this.props.data}},render:function(){var t=this.state.data.children.map(function(t,b){return BTReact.createElement(e,{key:t.key,data:t})});return BTReact.createElement("div",{className:"bt_bb_item_list"},t)},componentDidMount:function(){this.getDOMNode().addEventListener("bt_bb_event",this.handle);window.bt_bb_state_current=this.state.data},componentDidUpdate:function(){var e=0;t(".bt_bb_item_list > .bt_bb_wrap").each(function(){e++;var b=t(this).find(".bt_bb_preview_name").first().data("title");if(b===undefined){b=t(this).find(".bt_bb_preview_name").first().html();t(this).find(".bt_bb_preview_name").first().data("title",b)}t(this).find(".bt_bb_preview_name").first().html('<span class="bt_bb_order"><span class="bt_bb_order_inner">'+e+"</span></span>"+b)})},componentWillUnmount:function(){this.getDOMNode().removeEventListener("bt_bb_event",this.handle)},handle:function(e){window.bt_bb_callback_action=null;if(window.bt_bb_action=="move_up"){var b=bt_bb_get_obj_copy_by_id(this.state.data,window.bt_bb_from);bt_bb_insert_before(this.state.data,window.bt_bb_to,b);if(!window.bt_bb_ctrl){bt_bb_delete_obj(this.state.data,window.bt_bb_from)}}else if(window.bt_bb_action=="move_down"){var b=bt_bb_get_obj_copy_by_id(this.state.data,window.bt_bb_from);bt_bb_insert_after(this.state.data,window.bt_bb_to,b);if(!window.bt_bb_ctrl){bt_bb_delete_obj(this.state.data,window.bt_bb_from)}}else if(window.bt_bb_action=="move_inside"){if(bt_bb_insert_inside(this.state.data,window.bt_bb_to,bt_bb_get_obj_copy_by_id(this.state.data,window.bt_bb_from))){if(!window.bt_bb_ctrl){bt_bb_delete_obj(this.state.data,window.bt_bb_from)}}}else if(window.bt_bb_action=="delete"){bt_bb_delete_obj(this.state.data,window.bt_bb_from)}else if(window.bt_bb_action=="add_root"||window.bt_bb_action=="add_root_from_dialog"){if(window.bt_bb_action=="add_root"){var a=bt_bb_add_root(this.state.data);if(a!==undefined&&window.bt_bb_map[a[1]]["auto_add"]!==undefined){var _={};_.title=window.bt_bb_map[a[1]]["auto_add"];_.base=window.bt_bb_map[a[1]]["auto_add"];_.key=bt_bb_get_key();_.children=[];bt_bb_insert_inside(this.state.data,a[0],_)}}else{var a=bt_bb_add_root(this.state.data,window.bt_bb_base)}if(a!==undefined&&bt_bb_get_param(a[1],"show_settings_on_create")!==false){window.bt_bb_from=a[0];window.bt_bb_callback_action="edit"}}else if(window.bt_bb_action=="add"||window.bt_bb_action=="add_from_dialog"){if(window.bt_bb_action=="add"){var a=bt_bb_add(this.state.data)}else{var a=bt_bb_add(this.state.data,window.bt_bb_base)}if(a!==undefined&&bt_bb_get_param(a[1],"show_settings_on_create")!==false){window.bt_bb_from=a[0];window.bt_bb_callback_action="edit"}else if(a!==undefined&&bt_bb_get_param(a[1],"show_settings_on_create")!==true){var i=bt_bb_get_param(a[1],"accept");var n,o=0;for(n in i){if(i.hasOwnProperty(n)){o++}}if(i!==undefined&&i._content===true&&o==1){window.bt_bb_from=a[0];window.bt_bb_base=a[1];window.bt_bb_callback_action="add"}}}else if(window.bt_bb_action=="add_horizontal"){bt_bb_add_horizontal(this.state.data)}else if(window.bt_bb_action=="edit"){bt_bb_edit(this.state.data,window.bt_bb_from)}else if(window.bt_bb_action=="clone"){bt_bb_clone(this.state.data,window.bt_bb_from)}else if(window.bt_bb_action=="update_state"){this.replaceState({data:window.bt_bb_state_current},window.bt_bb_state_callback)}else if(window.bt_bb_action=="copy"){bt_bb_copy(this.state.data,window.bt_bb_from);t(".bt_bb_cb_items").addClass("bt_bb_cb_items_flash").delay(500).queue(function(e){t(this).removeClass("bt_bb_cb_items_flash");e()})}else if(window.bt_bb_action=="copy_plus"){bt_bb_copy_plus(this.state.data,window.bt_bb_from);t(".bt_bb_cb_items").addClass("bt_bb_cb_items_flash").delay(500).queue(function(e){t(this).removeClass("bt_bb_cb_items_flash");e()})}else if(window.bt_bb_action=="paste"){bt_bb_paste(this.state.data,window.bt_bb_from)}if(window.bt_bb_action!=null&&window.bt_bb_action!="edit"&&window.bt_bb_action!="copy"&&window.bt_bb_action!="copy_plus"){bt_bb_resize_h(this.state.data);if(window.bt_bb_action!="update_state"){bt_bb_push_state(this.state.data);this.replaceState({data:this.state.data},window.bt_bb_state_callback)}if(this.state.data.children.length>=0&&window.bt_bb_action=="update_wp_editor"){bt_bb_parse_data(this.state.data)}if(window.bt_bb_action!="refresh_on_ready"&&window.bt_bb_action!="update_wp_editor"){window.bt_bb_dirty=true}bt_bb_item_mousedown();bt_bb_toolbar()}}});var a=BTReact.createClass({render:function(){var t=window.bt_bb_text.add;if(this.props.container=="horizontal"){t=window.bt_bb_text.add+" / "+window.bt_bb_text.select_layout}return BTReact.createElement("div",{className:"bt_bb_toolbar_tools"},this.props.toggle=="true"?BTReact.createElement("i",{className:"bt_bb_toggle",title:window.bt_bb_text.toggle}):"",this.props.container=="vertical"||this.props.container=="horizontal"?BTReact.createElement("i",{className:"bt_bb_add",title:t}):"",this.props.has_params=="true"?BTReact.createElement("i",{className:"bt_bb_edit",title:window.bt_bb_text.edit}):"",BTReact.createElement("i",{className:"bt_bb_clone",title:window.bt_bb_text.clone}),this.props.mapped=="true"?BTReact.createElement("i",{className:"bt_bb_copy",title:window.bt_bb_text.copy}):"",this.props.mapped=="true"?BTReact.createElement("i",{className:"bt_bb_copy_plus",title:window.bt_bb_text.copy_plus}):"",this.props.mapped=="true"?BTReact.createElement("i",{className:"bt_bb_paste",title:window.bt_bb_text.paste}):"",BTReact.createElement("i",{className:"bt_bb_delete",title:window.bt_bb_text.delete}))}});window.bt_bb_parse_data=function(t){window.bt_bb_parse_data_str="";if(t.children.length>0){bt_bb_parse_data_helper(t);window.switchEditors.go("content","tmce");tinyMCE.get("content").setContent(window.switchEditors.wpautop(window.bt_bb_parse_data_str))}};window.bt_bb_parse_data_helper=function(t){if(t.title=="_root"){t=t.children}for(var e=0;e<t.length;e++){var b=false;if(t[e].title=="_content"){b=true}if(!b){window.bt_bb_parse_data_str+="["+t[e].base;if(t[e].attr!==undefined){var a=attr_to_arr(t[e].attr);for(var _=0;_<a.length;_++){window.bt_bb_parse_data_str+=" "+a[_][0]+'="'+a[_][1]+'"'}}window.bt_bb_parse_data_str+="]"}else{window.bt_bb_parse_data_str+=t[e].content}if(t[e].children!==undefined){bt_bb_parse_data_helper(t[e].children)}if(!b){window.bt_bb_parse_data_str+="[/"+t[e].base+"]"}}};window.attr_to_arr=function(t){var e=JSON.parse(t);var b=[];for(var a in e){b.push([a,e[a]])}return b};window.attr_to_obj=function(t){var e=JSON.parse(t);return e};window.bt_bb_resize_h=function(t){if(t.title=="_root"){t=t.children}for(var e=0;e<t.length;e++){if(window.bt_bb_map[t[e].title]!==undefined){if(window.bt_bb_map[t[e].title].container=="horizontal"){if(t[e].children!==undefined){var b=false;var a=false;var _=[];var i=[];for(var n=0;n<t[e].children.length;n++){if(window.bt_bb_map[t[e].children[n].title]!==undefined&&window.bt_bb_map[t[e].children[n].title].width_param!==undefined){var o=window.bt_bb_map[t[e].children[n].title].width_param;if(t[e].children[n].attr===undefined){t[e].children[n].attr="{}"}var d=attr_to_obj(t[e].children[n].attr);if(!d.hasOwnProperty(o)){d[o]="1/12"}var s=d[o].split("/");_.push(parseInt(s[0]));i.push(parseInt(s[1]))}else{b=true;break}}var r=0;for(var l=0;l<_.length;l++){var c=12*_[l]/i[l];if(c!=Math.floor(c)){a=true;break}r=r+c}if(!b&&(r!=12||a)){for(var n=0;n<t[e].children.length;n++){var o=window.bt_bb_map[t[e].children[n].title].width_param;var d=attr_to_obj(t[e].children[n].attr);d[o]="1/"+t[e].children.length;_[n]=1;i[n]=t[e].children.length;t[e].children[n].attr=JSON.stringify(d)}}a=false;for(var l=0;l<_.length;l++){var c=12*_[l]/i[l];if(c!=Math.floor(c)){a=true;break}}if(a){t[e].has_alert="bt_bb_item_alert"}else{t[e].has_alert=undefined}}}}if(t[e].children!==undefined){bt_bb_resize_h(t[e].children)}}};window.bt_bb_get_obj_copy_by_id=function(t,e){var b=bt_bb_get_obj_by_id(t,e);var a=JSON.parse(JSON.stringify(b));if(a!=null){a=bt_bb_set_new_keys(a)}return a};window.bt_bb_set_new_keys=function(t){t.key=bt_bb_get_key();for(var e=0;e<t.children.length;e++){bt_bb_set_new_keys(t.children[e])}return t};window.bt_bb_delete_obj=function(t,e,b){if(t.title!="_content"){for(var a=0;a<t.children.length;a++){if(e.bt_ends_with(t.children[a].key)){if(b!==undefined){t.children.splice(a,b)}else{t.children.splice(a,1)}break}bt_bb_delete_obj(t.children[a],e,b)}}};window.bt_bb_insert_before=function(t,e,b){if(t.title!="_content"){for(var a=0;a<t.children.length;a++){if(e.bt_ends_with(t.children[a].key)){t.children.splice(a,0,b);break}bt_bb_insert_before(t.children[a],e,b)}}};window.bt_bb_insert_after=function(t,e,b){if(t.title!="_content"){for(var a=0;a<t.children.length;a++){if(e.bt_ends_with(t.children[a].key)){t.children.splice(a+1,0,b);break}bt_bb_insert_after(t.children[a],e,b)}}};window.bt_bb_insert_inside=function(e,b,a){if(e.title!="_content"){for(var _=0;_<e.children.length;_++){if(b.bt_ends_with(e.children[_].key)){if(e.children[_].children!==undefined){e.children[_].children.push(a);if(window.bt_bb_action!="paste"&&window.bt_bb_action!="move_inside"&&window.bt_bb_map[a.base]!==undefined&&window.bt_bb_map[a.base]["auto_add"]!==undefined){var i={};i.title=window.bt_bb_map[a.base]["auto_add"];i.base=window.bt_bb_map[a.base]["auto_add"];i.key=bt_bb_get_key();i.children=[];var n={};if(window.bt_bb_map[i.base]!==undefined&&window.bt_bb_map[i.base].params!==undefined){t.each(window.bt_bb_map[i.base].params,function(t,e){if(e.hasOwnProperty("value")&&typeof e.value=="string"){n[e.param_name]=bt_bb_special_char_encode(e)}else if(e.hasOwnProperty("value")&&e.hasOwnProperty("default")){n[e.param_name]=e.default}})}i.attr=JSON.stringify(n);a.children.push(i)}return true}}var o=bt_bb_insert_inside(e.children[_],b,a);if(o===true){return true}}}};window.bt_bb_add_root=function(e,b){var a=[];if(b!==undefined){a.push(b)}else{t.each(window.bt_bb_map,function(t,e){if(e.root==true){a.push(e.base)}})}if(a.length==1){var _={};_.title=a[0];_.base=a[0];_.key=bt_bb_get_key();_.children=[];var i={};if(window.bt_bb_map[_.base]!==undefined&&window.bt_bb_map[_.base].params!==undefined){t.each(window.bt_bb_map[_.base].params,function(t,e){if(e.hasOwnProperty("value")&&typeof e.value=="string"){i[e.param_name]=bt_bb_special_char_encode(e.value)}else if(e.hasOwnProperty("value")&&e.hasOwnProperty("default")){i[e.param_name]=e.default}})}_.attr=JSON.stringify(i);e.children.push(_);return[_.key,_.base]}else if(a.length>1){window.bt_bb_dialog.show("add_root")}};window.bt_bb_add=function(e,b){var a=[];if(b!==undefined){a.push(b)}else{t.each(window.bt_bb_map,function(t,e){var b;if(window.bt_bb_map[window.bt_bb_base].accept!==undefined){b=window.bt_bb_map[window.bt_bb_base].accept[e.base]}if((b===true||window.bt_bb_map[window.bt_bb_base].accept_all===true&&b!==false||window.bt_bb_map[e.base].as_child!==undefined&&window.bt_bb_map[e.base].as_child["only"].indexOf(window.bt_bb_base)!=-1)&&(window.bt_bb_map[e.base].as_child===undefined||window.bt_bb_map[e.base].as_child!==undefined&&window.bt_bb_map[e.base].as_child["only"].indexOf(window.bt_bb_base)!=-1)){a.push(e.base)}});if(window.bt_bb_map[window.bt_bb_base].accept!==undefined&&window.bt_bb_map[window.bt_bb_base].accept["_content"]===true){a=[];a.push("_content")}}if(a.length==1){var _={};_.title=a[0];_.base=a[0];if(_.base=="_content"){_.content=""}_.key=bt_bb_get_key();_.children=[];var i={};if(window.bt_bb_map[_.base]!==undefined&&window.bt_bb_map[_.base].params!==undefined){t.each(window.bt_bb_map[_.base].params,function(t,e){if(e.hasOwnProperty("value")&&typeof e.value=="string"){if(e.type=="textarea_object"){i[e.param_name]=e.value}else{i[e.param_name]=bt_bb_special_char_encode(e.value)}}else if(e.hasOwnProperty("value")&&e.hasOwnProperty("default")){i[e.param_name]=e.default}})}_.attr=JSON.stringify(i);bt_bb_insert_inside(e,window.bt_bb_from,_);return[_.key,_.base]}else if(a.length>1){window.bt_bb_dialog.show("add")}};window.bt_bb_add_horizontal=function(t,e){if(e!==undefined){var b=false;e=e.replace(/\s/gm,"").replace(/<\/?[^>]+(>|$)/gm,"");if(e==""){b=true}else{var a=e.split("+");if(a.length>12){b=true}else{var _=0;var i=[];var n=[];for(var o=0;o<a.length;o++){var d=a[o].split("/");if(d.length!=2){b=true;break}var s=parseInt(d[0]);i.push(s);var r=parseInt(d[1]);n.push(r);if(s<1||s>12||r<1||r>12){b=true;break}}if(!b){for(var l=0;l<i.length;l++){var c=12*i[l]/n[l];if(c!=Math.floor(c)){b=true;break}_=_+c}if(_!=12){b=true}}}}if(b){alert(window.bt_bb_text.layout_error);return}var p=window.bt_bb_from;for(var o=0;o<t.children.length;o++){if(p.bt_ends_with(t.children[o].key)){var w=t.children[o].children.length;if(w>0){if(a.length>=w){for(var l=0;l<w;l++){for(var m in window.bt_bb_map[window.bt_bb_base].accept){}var f=window.bt_bb_map[m].width_param;var h=attr_to_obj(t.children[o].children[l].attr);h[f]=a[l];t.children[o].children[l].attr=JSON.stringify(h)}for(var l=w;l<a.length;l++){var u={};for(var m in window.bt_bb_map[window.bt_bb_base].accept){}u.title=m;u.base=m;u.key=bt_bb_get_key();u.children=[];var f=window.bt_bb_map[m].width_param;u.attr='{"'+f+'":'+bt_bb_json_encode(a[l])+"}";bt_bb_insert_inside(t,window.bt_bb_from,u)}}else{for(var l=0;l<a.length;l++){for(var m in window.bt_bb_map[window.bt_bb_base].accept){}var f=window.bt_bb_map[m].width_param;var h=attr_to_obj(t.children[o].children[l].attr);h[f]=a[l];t.children[o].children[l].attr=JSON.stringify(h)}bt_bb_delete_obj(t,t.children[o].children[a.length].key,w-a.length)}}else{for(var l=0;l<a.length;l++){var u={};for(var m in window.bt_bb_map[window.bt_bb_base].accept){}u.title=m;u.base=m;u.key=bt_bb_get_key();u.children=[];var f=window.bt_bb_map[m].width_param;u.attr='{"'+f+'":'+bt_bb_json_encode(a[l])+"}";bt_bb_insert_inside(t,window.bt_bb_from,u)}}window.bt_bb_action="refresh";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event");return true}var v=bt_bb_add_horizontal(t.children[o],e);if(v===true){return true}}}else{window.bt_bb_dialog.show("add_horizontal")}};window.bt_bb_edit=function(t,e){for(var b=0;b<t.children.length;b++){if(e.bt_ends_with(t.children[b].key)){if(t.children[b].title=="_content"){window.bt_bb_content=t.children[b].content;window.bt_bb_dialog.show("edit_content")}else{window.bt_bb_dialog.show("edit")}break}bt_bb_edit(t.children[b],e)}};window.bt_bb_clone=function(e,b){t(".bt_bb_toolbar_tools").css("transition","all 0s");for(var a=0;a<e.children.length;a++){if(b.bt_ends_with(e.children[a].key)){if(e.title=="_root"||window.bt_bb_map[e.base]===undefined||window.bt_bb_map[e.base].container!="horizontal"||window.bt_bb_map[e.base].container=="horizontal"&&e.children.length<12){var _=bt_bb_get_obj_copy_by_id(e,b);e.children.splice(a+1,0,_)}break}bt_bb_clone(e.children[a],b)}};window.bt_bb_init_number_items=function(){window.bt_bb_cb_items=localStorage.getItem("bt_bb_cb_items");if(window.bt_bb_cb_items===null)window.bt_bb_cb_items=0;t(".bt_bb_cb_items").html(window.bt_bb_cb_items)};window.bt_bb_set_number_items=function(e){localStorage.setItem("bt_bb_cb_items",e);t(".bt_bb_cb_items").html(e);window.bt_bb_cb_items=e};window.bt_bb_allowed=function(t,e){if(e===undefined)return false;var b=window.bt_bb_map[e];var a=false;if(b.accept!==undefined&&b.accept[t]===true||b.accept!==undefined&&b.accept[t]===undefined&&b.accept_all===true||b.accept===undefined&&b.accept_all===true){a=true}return a};window.bt_bb_cb_import=function(t){var e=decodeURIComponent(b64DecodeUnicode(t));var b=JSON.parse(e);for(var a=1;a<=b.length;a++){localStorage.setItem("bt_bb_cb_"+a,decodeURIComponent(b64DecodeUnicode(b[a-1].bt_bb_cb)));bt_bb_set_number_items(b.length)}};window.bt_bb_copy=function(t,e){if(window.bt_bb_cb_items>1){for(var b=2;b<=window.bt_bb_cb_items;b++){localStorage.removeItem("bt_bb_cb_"+b)}}var t=bt_bb_get_obj_by_id(t,e);localStorage.setItem("bt_bb_cb_1",JSON.stringify(t));bt_bb_set_number_items(1)};window.bt_bb_copy_plus=function(t,e){var b=bt_bb_get_obj_by_id(t,e);if(window.bt_bb_cb_items==0){localStorage.setItem("bt_bb_cb_1",JSON.stringify(b));bt_bb_set_number_items(1)}else{var a=JSON.parse(localStorage.getItem("bt_bb_cb_1"));var _=false;if(b.p_base!==undefined){_=bt_bb_allowed(a.base,b.p_base)}else if(window.bt_bb_map[b.base].root!==undefined&&window.bt_bb_map[a.base].root!==undefined){_=true}if(_){window.bt_bb_cb_items++;localStorage.setItem("bt_bb_cb_"+window.bt_bb_cb_items,JSON.stringify(b));bt_bb_set_number_items(window.bt_bb_cb_items)}else{alert(window.bt_bb_text.not_allowed)}}};window.bt_bb_paste=function(t,e){if(window.bt_bb_cb_items>0){var b=bt_bb_get_obj_by_id(t,e);var a=JSON.parse(localStorage.getItem("bt_bb_cb_1"));if(window.bt_bb_map[b.base].root!==undefined&&window.bt_bb_map[a.base].root!==undefined){for(var _=window.bt_bb_cb_items;_>=1;_--){a=JSON.parse(localStorage.getItem("bt_bb_cb_"+_));a=bt_bb_set_new_keys(a);bt_bb_insert_after(t,e,a)}}else if(bt_bb_allowed(a.base,b.p_base)){for(var _=window.bt_bb_cb_items;_>=1;_--){a=JSON.parse(localStorage.getItem("bt_bb_cb_"+_));a=bt_bb_set_new_keys(a);bt_bb_insert_after(t,e,a)}}else if(bt_bb_allowed(a.base,b.base)){for(var _=1;_<=window.bt_bb_cb_items;_++){a=JSON.parse(localStorage.getItem("bt_bb_cb_"+_));a=bt_bb_set_new_keys(a);bt_bb_insert_inside(t,e,a)}}else{alert(window.bt_bb_text.not_allowed)}}};window.bt_bb_paste_main_toolbar=function(){var t=JSON.parse(localStorage.getItem("bt_bb_cb_1"));if(window.bt_bb_map[t.base].root!==undefined){for(var e=1;e<=window.bt_bb_cb_items;e++){t=JSON.parse(localStorage.getItem("bt_bb_cb_"+e));t=bt_bb_set_new_keys(t);window.bt_bb_state_current.children.push(t)}bt_bb_event("refresh")}else{alert(window.bt_bb_text.not_allowed)}};window.bt_bb_dialog={};window.bt_bb_dialog.show=function(e){window.bt_bb_dialog.is_showing=true;var b="";if(e=="add_root"){var a=window.bt_bb_text.add_element;var i=[];t.each(window.bt_bb_map,function(t,e){if(e.root==true){i.push({base:e.base,name:e.name,description:e.description,icon:e.icon})}});i.sort(function(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())});t.each(i,function(t,e){b+='<div class="bt_bb_dialog_item bt_bb_dialog_add_element'+e.icon!==undefined?" "+e.icon:""+'" data-base="'+e.base+'"><b>'+e.name+"</b><i>"+e.description+"</i></div>"});t("#bt_bb_dialog .bt_bb_dialog_content").html(b);t(".bt_bb_dialog_add_element").click(function(e){window.bt_bb_base=t(this).data("base");window.bt_bb_dialog.hide();bt_bb_event("add_root_from_dialog")})}else if(e=="add"){var a=window.bt_bb_text.add_element;var i=[];t.each(window.bt_bb_map,function(t,e){var b;if(window.bt_bb_map[window.bt_bb_base].accept!==undefined){b=window.bt_bb_map[window.bt_bb_base].accept[e.base]}if((b===true||window.bt_bb_map[window.bt_bb_base].accept_all===true&&b!==false||window.bt_bb_map[e.base].as_child!==undefined&&window.bt_bb_map[e.base].as_child["only"].indexOf(window.bt_bb_base)!=-1)&&(window.bt_bb_map[e.base].as_child===undefined||window.bt_bb_map[e.base].as_child!==undefined&&window.bt_bb_map[e.base].as_child["only"].indexOf(window.bt_bb_base)!=-1)){if(window.bt_bb_map[e.base].is_mapped!==false){i.push({base:e.base,name:e.name,description:e.description,icon:e.icon})}}});i.sort(function(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())});var n="";n+='<div class="bt_bb_dialog_item bt_bb_add_filter_container">';n+='<input type="text" class="bt_bb_filter" placeholder="'+window.bt_bb_text.filter+'">';n+="</div>";t("#bt_bb_dialog .bt_bb_dialog_header_tools").append(n);var o=document.createDocumentFragment();var d,s,r,l;t.each(i,function(t,e){d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item bt_bb_dialog_add_element"+(e.icon!==undefined?" bt_bb_icon "+e.icon:"")],["data-base",e.base]]);s=bt_bb_create_dom_element("b",[]);l=document.createTextNode(e.name);s.appendChild(l);d.appendChild(s);r=bt_bb_create_dom_element("i",[]);l=document.createTextNode(e.description);r.appendChild(l);d.appendChild(r);o.appendChild(d)});t("#bt_bb_dialog .bt_bb_dialog_content")[0].appendChild(o);t(".bt_bb_dialog_add_element").click(function(e){window.bt_bb_base=t(this).data("base");window.bt_bb_dialog.hide();bt_bb_event("add_from_dialog")});t(".bt_bb_filter").keyup(function(e){var b=t(this).val();t(".bt_bb_dialog_item").not(".bt_bb_add_filter_container").each(function(){var e=t(this).html().replace(/(<([^>]+)>)/gi,"");var a=new RegExp(b,"i");if(!a.test(e)){t(this).hide()}else{t(this).show()}})})}else if(e=="add_horizontal"){var c=bt_bb_get_obj_by_id(window.bt_bb_state_current,window.bt_bb_from);var p="";for(var r=0;r<c.children.length;r++){var w=window.bt_bb_map[c.children[r].base].width_param;var m=attr_to_obj(c.children[r].attr);p+=m[w];if(r<c.children.length-1)p+="+"}var a=window.bt_bb_text.select_layout;t("#bt_bb_dialog").addClass("bt_bb_dialog_add_horizontal");b+='<div class="bt_bb_dialog_pick_layout_container">';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_11" title="1/1"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_12_12" title="1/2+1/2"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_13_13_13" title="1/3+1/3+1/3"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_14_14_14" title="1/4+1/4+1/4+1/4"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_23_13" title="2/3+1/3"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_13_23" title="1/3+2/3"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_34_14" title="3/4+1/4"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_34" title="1/4+3/4"></span>';b+='<span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_24_14" title="1/4+2/4+1/4"></span>';b+="</div>";b+='<div class="bt_bb_dialog_enter_layout_container">';b+='<div contenteditable="true" class="bt_bb_dialog_enter_layout">1/1</div>';b+="</div>";t("#bt_bb_dialog .bt_bb_dialog_content").html(b);t("#bt_bb_dialog").append('<input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small" value="'+window.bt_bb_text.submit+'">');if(p!=""){t(".bt_bb_dialog_enter_layout").html(p)}t(".bt_bb_dialog_pick_layout").click(function(e){t(".bt_bb_dialog_enter_layout").html(t(this).attr("title").replace(/\s/gm,""));t(".bt_bb_dialog_enter_layout").focus()});t(".bt_bb_dialog_enter_layout").keypress(function(e){if(e.which==13){e.preventDefault();bt_bb_add_horizontal(window.bt_bb_state_current,t(this).html());window.bt_bb_dialog.hide()}});t(".bt_bb_dialog_add_horizontal .bt_bb_dialog_button").click(function(e){bt_bb_add_horizontal(window.bt_bb_state_current,t(".bt_bb_dialog_enter_layout").html());window.bt_bb_dialog.hide()})}else if(e=="edit_content"){var a=window.bt_bb_text.edit_content;t("#bt_bb_dialog").addClass("bt_bb_dialog_tinymce_container");t(".bt_bb_dialog_tinymce").show();t(".bt_bb_dialog_button").unbind("click");t(".bt_bb_dialog_button").click(function(){window.switchEditors.go("bt_bb_tinymce","tmce");var t=bt_bb_get_obj_by_id(window.bt_bb_state_current,window.bt_bb_from);t.content=tinyMCE.get("bt_bb_tinymce").getContent();if(t.content.startsWith("<p>[")&&t.content.endsWith("]</p>")){t.content=t.content.substring(3);t.content=t.content.substring(0,t.content.length-4)}window.bt_bb_action="refresh";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event");window.bt_bb_dialog.hide()});t("#bt_bb_dialog").css("visibility","visible");t("#bt_bb_dialog .mce-i-resize").show()}else if(e=="edit"){var a=window.bt_bb_text.edit;var c=bt_bb_get_obj_by_id(window.bt_bb_state_current,window.bt_bb_from);var m={};if(c.attr!==undefined){m=attr_to_obj(c.attr)}if(window.bt_bb_map[c.base]!==undefined){a=a+" "+window.bt_bb_map[c.base].name;t("#bt_bb_dialog").removeClass();t("#bt_bb_dialog").addClass("bt_bb_dialog"+" "+c.base);var f=window.bt_bb_map[c.base].params;if(f!==undefined){var o=document.createDocumentFragment();var h=new Array;var u="";var v="";window.bt_bb.param_groups=[];for(var r=0;r<f.length;r++){b="";var g="";if(m[f[r].param_name]!==undefined){g=m[f[r].param_name]}else{m[f[r].param_name]=""}if(f[r].group!==undefined){u=f[r].group}else{u=window.bt_bb_text.general}v=" bt_bb_group_"+u.replace(" ","_").replace(/^[^a-z]+|[^\w:.-]+/gi,"");if(window.bt_bb.param_groups.indexOf(u)==-1){window.bt_bb.param_groups.push(u)}if(f[r].type=="attach_images"||f[r].type=="attach_image"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);b+="<b>"+f[r].heading+"</b>";b+='<div class="bt_bb_dialog_image_container">';var y=g.split(",");if(y[0]!=""){for(var k=0;k<y.length;k++){b+='<div class="bt_bb_sortable_item" data-id="'+y[k]+'"><i class="fa fa-times"></i></div>';setTimeout(window.bt_bb_sortable_background,100,y[k])}}b+="</div>";b+='<div class="bt_bb_dialog_inline_buttons bt_bb_left">';b+='<input type="button" class="bt_bb_dialog_select_images_button button button-small" value="'+window.bt_bb_text.select+'">';b+="</div>";d.innerHTML=b}else if(f[r].type=="textfield"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);var x="";if(g==""){if(f[r].value!==undefined){x=f[r].value;x=bt_bb_special_char_decode(x)}}else{x=bt_bb_special_char_decode(g)}d.innerHTML="<b>"+f[r].heading+'</b><input type="text" value="'+x+'">'}else if(f[r].type=="datetime-local"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);var x="";if(g==""){if(f[r].value!==undefined){x=f[r].value
;x=bt_bb_special_char_decode(x)}}else{x=bt_bb_special_char_decode(g)}d.innerHTML="<b>"+f[r].heading+'</b><input type="datetime-local" value="'+x+'">'}else if(f[r].type=="textarea"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);d.innerHTML="<b>"+f[r].heading+'</b><textarea rows="5">'+bt_bb_special_char_decode(g)+"</textarea>"}else if(f[r].type=="textarea_object"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);try{d.innerHTML="<b>"+f[r].heading+'</b><textarea rows="5">'+b64DecodeUnicode(g)+"</textarea>"}catch(t){d.innerHTML="<b>"+f[r].heading+'</b><textarea rows="5">'+g+"</textarea>"}}else if(f[r].type=="dropdown"||f[r].type=="dropdown_color"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);b+="<b>"+f[r].heading+"</b>";b+="<select";var C=f[r].value;var S=Object.keys(C);for(var O=0;O<S.length;O++){if(g==C[S[O]]||g==""&&O==0){b+=">";if(f[r].type=="dropdown_color"){b+='<option value="'+C[S[O]]+'" selected>'+S[O]+"</option>"}else{b+='<option value="'+C[S[O]]+'" selected>'+S[O]+"</option>"}}else{b+=">";if(f[r].type=="dropdown_color"){b+='<option value="'+C[S[O]]+'">'+S[O]+"</option>"}else{b+='<option value="'+C[S[O]]+'">'+S[O]+"</option>"}}}b+="</select>";d.innerHTML=b}else if(f[r].type=="iconpicker"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);b+="<b>"+f[r].heading+"</b>";b+=window.bt_bb_iconpicker(f[r].value,g);d.innerHTML=b}else if(f[r].type=="colorpicker"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item bt_bb_colorpicker"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);b+="<b>"+f[r].heading+"</b>";b+='<input type="text" class="bt_bb_color_picker" value="'+bt_bb_special_char_decode(g)+'">';d.innerHTML=b}else if(f[r].type=="checkbox"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);b+="<b>"+f[r].heading+"</b>";var C=f[r].value;var S=Object.keys(C);var E="";if(g==C[S[0]]){E=" "+"checked"}b+='<label for="bt_'+c.base+"_"+f[r].param_name+'"><input id="bt_'+c.base+"_"+f[r].param_name+'" type="checkbox" value="'+C[S[0]]+'"'+E+"><span>"+S[0]+"</span></label>";d.innerHTML=b}else if(f[r].type=="checkbox_group"){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);b+="<b>"+f[r].heading+"</b>";var C=f[r].value;var S=Object.keys(C);var T=g.split(" ");for(var O=0;O<S.length;O++){var E="";if(t.inArray(C[S[O]],T)!=-1){E=" "+"checked"}b+='<label for="'+c.base+"_"+f[r].param_name+O+'"><input id="'+c.base+"_"+f[r].param_name+O+'" type="checkbox" value="'+C[S[O]]+'"'+E+"><span>"+S[O]+"</span></label>"}d.innerHTML=b}else if(f[r].type=="hidden"){var N=new Object;N.name=f[r].param_name;N.value=f[r].value;h.push(N)}else{if(window["bt_bb_cf_"+f[r].type+"_content"]!==undefined){var d=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+v],["data-param_name",f[r].param_name],["data-type",f[r].type]]);var z={};z.param_heading=f[r].heading;z.param_value=f[r].value;z.param_name=f[r].param_name;z.val=g;z.base=c.base;d.innerHTML=window["bt_bb_cf_"+f[r].type+"_content"](z)}}if(f[r].type!="hidden"){if(f[r].description!==undefined){var j=bt_bb_create_dom_element("i",[]);j.innerHTML=f[r].description;d.appendChild(j)}o.appendChild(d)}}t("#bt_bb_dialog").data("hidden",JSON.stringify(h));t("#bt_bb_dialog .bt_bb_dialog_content")[0].appendChild(o);t(".bt_bb_color_picker").wpColorPicker();t(".bt_bb_iconpicker_select").on("click",function(e){t(this).next().toggle();t(this).next().next().toggle()});t(".bt_bb_iconpicker_icons .bt_bb_icon_preview").on("click",function(e){var b=t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon",t(this).data("icon"));b.attr("data-icon-code",t(this).data("icon-code"));b.removeClass();b.addClass(t(this).attr("class"));t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_iconpicker_select_text").html(t(this).attr("title"));t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_clear").show();t(this).parent().hide();t(this).parent().prev().find("input").val("").trigger("keyup");t(this).parent().prev().hide()});t(".bt_bb_iconpicker .bt_bb_iconpicker_clear").on("click",function(e){e.stopPropagation();var b=t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon","");b.attr("data-icon-code","");b.parent().find(".bt_bb_iconpicker_select_text").html("");t(this).closest(".bt_bb_iconpicker").find("input").val("");t(this).parent().next().find("input").val("").trigger("keyup");t(this).parent().next().hide();t(this).parent().next().next().hide();t(this).hide()});t(".bt_bb_iconpicker .bt_bb_filter").keyup(function(e){var b=t(this).val();t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_icons .bt_bb_icon_preview").each(function(){var e=t(this).attr("title");var a=new RegExp(b,"i");if(!a.test(e)){t(this).hide()}else{t(this).show()}})});t('#bt_bb_dialog .bt_bb_dialog_item[data-type="attach_images"] .bt_bb_dialog_image_container').sortable({cursor:"move",update:function(e,b){var a=t(this).closest(".bt_bb_dialog_item").data("param_name");var _="";t(this).find(".bt_bb_sortable_item").each(function(){_+=t(this).data("id")+","});_=_.slice(0,-1);m[a]=_}});t("#bt_bb_dialog .bt_bb_dialog_image_container").on("click",".fa-times",function(e){var b=t(this).closest(".bt_bb_dialog_item").data("param_name");var a=t(this).closest(".bt_bb_dialog_image_container");t(this).parent().remove();var _="";a.find(".bt_bb_sortable_item").each(function(){_+=t(this).data("id")+","});_=_.slice(0,-1);m[b]=_});t("#bt_bb_dialog .bt_bb_dialog_image_container").disableSelection();t(".bt_bb_dialog_item").on("click",".bt_bb_dialog_select_images_button",function(e){var b=bt_bb_get_key();var a=t(this).closest(".bt_bb_dialog_item").find(".bt_bb_dialog_image_container");var i=t(this).closest(".bt_bb_dialog_item").data("param_name");var n=t(this).closest(".bt_bb_dialog_item").data("type");var o="add";if(n=="attach_image"){o=false}var d=wp.media.controller.Library.extend({defaults:_.defaults({id:b,title:window.bt_bb_text.select_images,allowLocalEdits:false,displaySettings:false,displayUserSettings:false,multiple:o,type:"image"},wp.media.controller.Library.prototype.defaults)});var s=wp.media({button:{text:window.bt_bb_text.select},state:b,states:[new d]});s.on("close",function(){var t=s.state(b).get("selection");var e="";var _="";t.each(function(t){if(t.attributes.sizes!==undefined){var b="";if(t.attributes.sizes.thumbnail!==undefined){b=t.attributes.sizes.thumbnail.url}else{b=t.attributes.sizes.full.url}_+=t.id+",";window.bt_bb.cache[t.id]={};window.bt_bb.cache[t.id].url=b;window.bt_bb.cache[t.id].title=t.attributes.title;e+='<div class="bt_bb_sortable_item" data-id="'+t.id+'" style="background-image:url(\''+b+'\');"><i class="fa fa-times"></i></div>';a.html(e)}});_=_.slice(0,-1);m[i]=_});s.on("open",function(){var e=s.state(b).get("selection");a.find(".bt_bb_sortable_item").each(function(){var b=wp.media.attachment(t(this).data("id"));e.add(b)})});s.open()})}}if(window.bt_bb.param_groups.length>0){t(".bt_bb_dialog_item").hide()}t.each(window.bt_bb.param_groups,function(e,b){var a="bt_bb_group_tab";if(e==0){a="bt_bb_group_tab bt_bb_group_tab_active";t(".bt_bb_group_"+b).show()}t(".bt_bb_dialog_header_tools").append('<span class="'+a+'">'+b+"</span>")});t("#bt_bb_dialog .bt_bb_group_tab").click(function(e){var b=t(this).html();t(".bt_bb_dialog_item").hide();t(".bt_bb_group_"+b.replace(" ","_").replace(/^[^a-z]+|[^\w:.-]+/gi,"")).show();t(".bt_bb_group_tab").removeClass("bt_bb_group_tab_active");t(this).addClass("bt_bb_group_tab_active");window.bt_bb_resize_dialog()});t("#bt_bb_dialog").append('<input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small" value="'+window.bt_bb_text.submit+'">');t("#bt_bb_dialog .bt_bb_dialog_button").click(function(e){t("#bt_bb_dialog .bt_bb_dialog_item").each(function(){var e=t(this).data("param_name");var b=t(this).data("type");if(b=="textfield"||b=="datetime-local"||b=="colorpicker"){m[e]=bt_bb_special_char_encode(t(this).find("input").val())}else if(b=="checkbox"){if(t(this).find("input").prop("checked")){m[e]=t(this).find("input").val()}else{m[e]=""}}else if(b=="checkbox_group"){var a=[];t(this).find("input").each(function(){if(t(this).prop("checked")){a.push(t(this).val())}});m[e]=a.join(" ")}else if(b=="textarea"){m[e]=bt_bb_special_char_encode(t(this).find("textarea").val())}else if(b=="textarea_object"){try{m[e]=b64EncodeUnicode(t(this).find("textarea").val())}catch(b){m[e]=t(this).find("textarea").val()}}else if(b=="dropdown"){m[e]=t(this).find("select :selected").val()}else if(b=="iconpicker"){m[e]=t(this).find(".bt_bb_iconpicker_select .bt_bb_icon_preview").data("icon")}else{if(window["bt_bb_cf_"+b+"_on_submit"]!==undefined){m[e]=window["bt_bb_cf_"+b+"_on_submit"](t(this))}}});var b=JSON.parse(t("#bt_bb_dialog").data("hidden"));for(var a=0;a<b.length;a++){m[""+b[a].name]=b[a].value}c.attr=JSON.stringify(m);window.bt_bb_dialog.hide();window.bt_bb_action="refresh";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")})}else if(e=="manage_cb"){a=window.bt_bb_text.manage_cb;b+='<div class="bt_bb_dialog_item">';b+='<input type="text" class="bt_bb_impex_input">';b+="</div>";t("#bt_bb_dialog .bt_bb_dialog_content").html(b);t("#bt_bb_dialog").append('<div class="bt_bb_dialog_inline_buttons"><input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small bt_bb_button_export" value="'+window.bt_bb_text.export+'"><input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small bt_bb_button_import" value="'+window.bt_bb_text.import+'"></div>');t("#bt_bb_dialog .bt_bb_button_export").click(function(e){if(window.bt_bb_cb_items>0){var b="[";for(var a=1;a<=window.bt_bb_cb_items;a++){b+='{"bt_bb_cb":"'+b64EncodeUnicode(encodeURIComponent(localStorage.getItem("bt_bb_cb_"+a)))+'"},'}b=b.substring(0,b.length-1);b+="]";t(".bt_bb_impex_input").val(b64EncodeUnicode(encodeURIComponent(b)));t(".bt_bb_impex_input").select()}});t("#bt_bb_dialog .bt_bb_button_import").click(function(e){if(t(".bt_bb_impex_input").val()){bt_bb_cb_import(t(".bt_bb_impex_input").val())}})}else if(e=="sc_mapper"){a=window.bt_bb_text.sc_mapper;t("#bt_bb_dialog").addClass("bt_bb_dialog_sc_mapper_container");var n="";n+='<div class="bt_bb_dialog_item bt_bb_sc_mapper_filter_container">';n+='<input type="text" class="bt_bb_filter" placeholder="'+window.bt_bb_text.filter+'">';n+="</div>";t("#bt_bb_dialog .bt_bb_dialog_header_tools").append(n);var R=function(t){var e=t;if(window.bt_bb_map_primary[t]!==undefined){e+=" "+"/"+" "+"p"}if(window.bt_bb_map_secondary[t]!==undefined){e+=" "+"/"+" "+"s"}return e};var o=document.createDocumentFragment();var d=bt_bb_create_dom_element("div",[["id","bt_bb_sc_mapper_accordion"]]);for(var r=0;r<window.bt_bb.all_sc.length;r++){if(window.bt_bb_map[window.bt_bb.all_sc[r]]!==undefined&&window.bt_bb_map[window.bt_bb.all_sc[r]].is_mapped!==false){var J=bt_bb_create_dom_element("h3",[["class","bt_bb_sc_mapper_item"]]);J.innerHTML='<i class="fa fa-chevron-down"></i><span>'+R(window.bt_bb.all_sc[r])+"</span>";var B=bt_bb_create_dom_element("div",[["data-base",window.bt_bb.all_sc[r]]])}else{var J=bt_bb_create_dom_element("h3",[["class","bt_bb_sc_mapper_item bt_bb_sc_mapper_unmapped"]]);J.innerHTML='<i class="fa fa-chevron-down"></i><span>'+window.bt_bb.all_sc[r]+"</span>";var B=bt_bb_create_dom_element("div",[["data-base",window.bt_bb.all_sc[r]]])}d.appendChild(J);d.appendChild(B)}o.appendChild(d);t("#bt_bb_dialog .bt_bb_dialog_content")[0].appendChild(o);t(".bt_bb_filter").keyup(function(e){var b=t(this).val();t("#bt_bb_sc_mapper_accordion > div").removeClass("bt_bb_map_item_active");t("#bt_bb_sc_mapper_accordion > h3").removeClass("bt_bb_map_header_active");t("#bt_bb_sc_mapper_accordion > h3 > i").removeClass("fa-chevron-up").addClass("fa-chevron-down");t(".bt_bb_sc_mapper_item").each(function(){var e=t(this).html().replace(/(<([^>]+)>)/gi,"");var a=new RegExp(b,"i");if(!a.test(e)){t(this).hide()}else{t(this).show()}})});t(".bt_bb_sc_map").keydown(function(e){if(e.keyCode===9){e.preventDefault();var b=this.selectionStart;var a=this.selectionEnd;var _=t(this);_.val(_.val().substring(0,b)+"\t"+_.val().substring(a));this.selectionStart=this.selectionEnd=b+1;t(this).parent().find(".bt_bb_save_mapping_button").prop("disabled",false)}});t("#bt_bb_sc_mapper_accordion h3").click(function(e){var b=t(this).next();if(b.hasClass("bt_bb_map_item_active")){b[0].innerHTML="";b.removeClass("bt_bb_map_item_active");t(this).removeClass("bt_bb_map_header_active");t(this).find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down")}else{var a='<input type="button" class="button button-small bt_bb_insert_mapping_template_button" value="'+window.bt_bb_text.insert_mapping+'"><input type="button" class="button button-small bt_bb_delete_mapping_button" disabled value="'+window.bt_bb_text.delete+'"><input type="button" class="button button-small bt_bb_save_mapping_button" disabled value="'+window.bt_bb_text.save+'"><span class="spinner" style="display: none;"></span><textarea class="bt_bb_sc_map" rows="10"></textarea>';b[0].innerHTML=a;autosize(t(".bt_bb_sc_map"));b.addClass("bt_bb_map_item_active");t(this).addClass("bt_bb_map_header_active");t(this).find("i").removeClass("fa-chevron-down").addClass("fa-chevron-up");var _=b.data("base");if(window.bt_bb_map_secondary[_]!==undefined){b.find(".bt_bb_delete_mapping_button").prop("disabled",false);b.find(".bt_bb_insert_existing_mapping_button").click();b.find(".bt_bb_save_mapping_button").prop("disabled",true)}}});t("#bt_bb_sc_mapper_accordion").on("keydown",".bt_bb_sc_map",function(){t(this).parent().find(".bt_bb_save_mapping_button").prop("disabled",false)});t("#bt_bb_sc_mapper_accordion").on("click",".bt_bb_insert_mapping_template_button",function(e){var b=t(this).parent().find("textarea");var a=t(this).parent().data("base");if(window.bt_bb_map[a]!==undefined&&window.bt_bb_map[a].is_mapped!==false){var _=JSON.stringify(window.bt_bb_map[a],null,"\t")}else if(window.vc_mapper!==undefined&&window.vc_mapper[a]!==undefined){var i=window.vc_mapper[a];_={};_.name=i.name!==undefined?i.name:"";_.base=i.base!==undefined?i.base:"";_.description=i.description!==undefined?i.description:"";_.show_settings_on_create=i.show_settings_on_create!==undefined?i.show_settings_on_create:true;if(i.is_container===true){if(i.base=="vc_row"){_.root=true;_.container="horizontal";_.accept={vc_column:true};_.toggle=true}else if(i.base=="vc_row_inner"){_.container="horizontal";_.accept={vc_column_inner:true}}else if(i.base=="vc_column"){_.container="vertical";_.width_param="width";_.accept_all=true;_.accept={vc_row:false,vc_column:false,vc_column_inner:false}}else if(i.base=="vc_column_inner"){_.container="vertical";_.width_param="width";_.accept_all=true;_.accept={vc_row:false,vc_column:false,vc_row_inner:false,vc_column_inner:false}}else{_.container="vertical"}}_.params=[];var n="";var o=0;for(var d=0;d<i.params.length;d++){if(i.params[d].type!="textarea_html"&&i.params[d].admin_label!==false){_.params[o]={};_.params[o].type="textfield";n=i.params[d].type;if(n=="textarea"||n=="dropdown"||n=="attach_image"||n=="attach_images"||n=="colorpicker"||n=="checkbox"||n=="checkbox_group"||n=="hidden"){_.params[o].type=n}_.params[o].heading=i.params[d].heading!==undefined?i.params[d].heading:"";if(i.params[d].description!==undefined)_.params[o].heading+=" "+"("+i.params[d].description+")";_.params[o].param_name=i.params[d].param_name!==undefined?i.params[d].param_name:"";_.params[o].value=i.params[d].value!==undefined?i.params[d].value:"";if(i.params[d].holder!==undefined)_.params[o].preview=true;o++}else if(i.params[d].type=="textarea_html"){_.container="vertical";_.accept={_content:true}}}_=JSON.stringify(_,null,"\t")}else{var _={};_.name=a;_.base=a;_.description="";_.show_settings_on_create=true;_.params=[];_.params[0]={};_.params[0].type="textfield";_.params[0].heading="Param 1";_.params[0].param_name="param_1";_.params[0].value="";_.params[0].preview=true;_.params[1]={};_.params[1].type="dropdown";_.params[1].heading="Param 2";_.params[1].param_name="param_2";_.params[1].value={"Option 1":"value 1","Option 2":"value 2"};_.params[1].preview=true;_=JSON.stringify(_,null,"\t")}b.val(_);var s=document.createEvent("Event");s.initEvent("autosize:update",true,false);b[0].dispatchEvent(s);t(this).parent().find(".bt_bb_save_mapping_button").prop("disabled",false)});t("#bt_bb_sc_mapper_accordion").on("click",".bt_bb_save_mapping_button",function(e){var b=t(this).parent().data("base");var a=t(this);try{var _=JSON.parse(t(this).parent().find(".bt_bb_sc_map").val())}catch(e){alert(e);return false}var i=JSON.stringify(_);a.siblings(".spinner").show();a.siblings(".spinner").css("visibility","visible");var n={action:"bt_bb_save_mapping",base:b,map:i};t.ajax({type:"POST",url:window.BTAJAXURL,data:n,async:true,success:function(t){if(t=="ok"){a.prop("disabled",true);a.siblings(".spinner").hide();a.closest("div").prev(".bt_bb_sc_mapper_item").removeClass("bt_bb_sc_mapper_unmapped");window.bt_bb_map[b]=JSON.parse(i);if(window.bt_bb_map_secondary[b]===undefined){window.bt_bb_map_secondary[b]=true}a.closest("div").prev(".bt_bb_sc_mapper_item").find("span").html(R(b));if(window.bt_bb_map_secondary[b]!==undefined){a.parent("div").find(".bt_bb_delete_mapping_button").prop("disabled",false)}window.bt_bb_action="refresh";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")}}})});t("#bt_bb_sc_mapper_accordion").on("click",".bt_bb_delete_mapping_button",function(e){var b=t(this).parent().data("base");var a=t(this);a.siblings(".spinner").show();a.siblings(".spinner").css("visibility","visible");var _={action:"bt_bb_delete_mapping",base:b};t.ajax({type:"POST",url:window.BTAJAXURL,data:_,async:true,success:function(t){if(t=="ok"){a.prop("disabled",true);a.siblings(".spinner").hide();if(window.bt_bb_map_secondary[b]!==undefined){delete window.bt_bb_map_secondary[b]}a.parent().find("textarea").val("");if(window.bt_bb_map_primary[b]===undefined){a.closest("div").prev(".bt_bb_sc_mapper_item").addClass("bt_bb_sc_mapper_unmapped");delete window.bt_bb_map[b];window.bt_bb_action="refresh";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")}else{window.bt_bb_map[b]=window.bt_bb_map_primary[b]}a.closest("div").prev(".bt_bb_sc_mapper_item").find("span").html(R(b))}}})})}else if(e=="custom_css"){a=window.bt_bb_text.custom_css;b+='<div class="bt_bb_dialog_item">';b+='<textarea id="bt_bb_custom_css_content" class="bt_bb_custom_css_content" rows="10">'+b64DecodeUnicode(window.bt_bb_custom_css)+"</textarea>";b+="</div>";t("#bt_bb_dialog .bt_bb_dialog_content").html(b);t("#bt_bb_dialog").append('<div class="bt_bb_dialog_inline_buttons"><input type="button" class="bt_bb_dialog_button button button-small bt_bb_button_save_custom_css" value="'+window.bt_bb_text.save+'"></div>');if(wp.codeEditor!==undefined){window.bt_bb_ce=wp.codeEditor.initialize("bt_bb_custom_css_content")}else{t("#bt_bb_dialog").on("keydown",".bt_bb_custom_css_content",function(e){if(e.keyCode===9){e.preventDefault();var b=this.selectionStart;var a=this.selectionEnd;var _=t(this);_.val(_.val().substring(0,b)+"\t"+_.val().substring(a));this.selectionStart=this.selectionEnd=b+1}})}}t("#bt_bb_dialog .bt_bb_dialog_header span").html(a);t('.bt_bb_dialog_item input[type="text"]').keypress(function(t){if(t.which==13){t.preventDefault()}});if(e=="edit_content"){t(".bt_bb_dialog_tinymce").css("height","auto");window.switchEditors.go("bt_bb_tinymce","tmce");tinyMCE.get("bt_bb_tinymce").setContent(window.switchEditors.wpautop(window.bt_bb_content))}else{t("#bt_bb_dialog").css("visibility","visible");t("#bt_bb_dialog .mce-i-resize").show()}if(e=="add"||e=="sc_mapper"){t(".bt_bb_filter").focus()}window.bt_bb_resize_dialog()};window.bt_bb_dialog.hide=function(e){window.bt_bb_dialog.is_showing=false;window.bt_bb_dialog.is_mouseover=false;t(".wp-picker-open").click();t(".bt_bb_dialog_tinymce").hide();t("#bt_bb_dialog").data("hidden","");t("#bt_bb_dialog").removeClass("bt_bb_dialog_tinymce_container");t("#bt_bb_dialog").removeClass("bt_bb_dialog_sc_mapper_container");t("#bt_bb_dialog").removeClass("bt_bb_dialog_add_horizontal");t("#bt_bb_dialog").removeClass("bt_bb_dialog_custom_css");var b=t("#bt_bb_dialog .bt_bb_dialog_content")[0];while(b.firstChild){b.removeChild(b.firstChild)}t("#bt_bb_dialog .bt_bb_dialog_header")[0].innerHTML='<div class="bt_bb_dialog_close"></div><span></span>';t("#bt_bb_dialog .bt_bb_dialog_header_tools")[0].innerHTML="";t("#bt_bb_dialog > input").remove();t("#bt_bb_dialog > .bt_bb_dialog_inline_buttons").remove();t("#bt_bb_dialog").css("visibility","hidden")};t(document).ready(function(){t("#bt_bb_dialog").on("click",".bt_bb_dialog_close",function(t){window.bt_bb_dialog.hide()})});window.bt_bb_get_obj_by_id=function(t,e){var b=null;for(var a=0;a<t.children.length;a++){if(e.bt_ends_with(t.children[a].key)){b=t.children[a];break}b=bt_bb_get_obj_by_id(t.children[a],e);if(b!=null)break}return b};window.bt_bb_get_param=function(t,e){if(window.bt_bb_map[t]!==undefined){return window.bt_bb_map[t][e]}return undefined};window.bt_bb_state_callback=function(){bt_bb_horizontal_responsive();if(window.bt_bb_callback_action!==null){bt_bb_event(window.bt_bb_callback_action)}};window.bt_bb_horizontal_responsive=function(){t(".bt_bb_horizontal").each(function(){var e=t(this).width();var b=false;t(this).find(".bt_bb_is_width").each(function(){var a=bt_bb_get_obj_by_id(window.bt_bb_state_current,t(this).data("reactid"));var _=window.bt_bb_map[a.base].width_param;var i=attr_to_obj(a.attr);var n=i[_];n=n.split("/");n=12*n[0]/n[1];var o=e*n/12;if(o<window.bt_bb.min_width){b=true;return false}});if(b){t(this).find(".bt_bb_is_width").removeClass("bt_bb_width");t(this).css("display","block")}else{t(this).find(".bt_bb_is_width").addClass("bt_bb_width");t(this).css("display","table")}})};t(window).resize(function(){bt_bb_horizontal_responsive()});window.bt_bb_push_state=function(t){window.bt_bb_state_current=t;window.bt_bb_state.splice(window.bt_bb_state_pointer+1);window.bt_bb_state.push(JSON.stringify(t));window.bt_bb_state_pointer=window.bt_bb_state.length-1};window.bt_bb_undo=function(){window.bt_bb_dialog.hide();window.bt_bb_state_pointer--;if(window.bt_bb_state_pointer>-1){window.bt_bb_state_current=JSON.parse(window.bt_bb_state[window.bt_bb_state_pointer]);window.bt_bb_action="update_state";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")}else{window.bt_bb_state_pointer++}};window.bt_bb_redo=function(){window.bt_bb_dialog.hide();window.bt_bb_state_pointer++;if(window.bt_bb_state_pointer<=window.bt_bb_state.length-1){window.bt_bb_state_current=JSON.parse(window.bt_bb_state[window.bt_bb_state_pointer]);window.bt_bb_action="update_state";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")}else{window.bt_bb_state_pointer--}};window.bt_bb_sortable_background=function(e){if(window.bt_bb.cache[e]===undefined){var b=wp.media.attachment(e);b.fetch().done(function(e){var b="";if(e.sizes.thumbnail!==undefined){b=e.sizes.thumbnail.url}else{b=e.sizes.full.url}t('.bt_bb_sortable_item[data-id="'+e.id+'"]').css("background-image",'url("'+b+'")');t('.bt_bb_sortable_item[data-id="'+e.id+'"]').css("background-size","cover");window.bt_bb.cache[e.id]={};window.bt_bb.cache[e.id].url=b;window.bt_bb.cache[e.id].title=e.title})}else{t('.bt_bb_sortable_item[data-id="'+e+'"]').css("background-image",'url("'+window.bt_bb.cache[e].url+'")');t('.bt_bb_sortable_item[data-id="'+e+'"]').css("background-size","cover")}};window.bt_bb_iconpicker=function(t,e){var b='<div class="bt_bb_iconpicker">';var a=Object.keys(t);var _;b+='<div class="bt_bb_iconpicker_select">';var i=e.slice(0,-5);var n=e.substr(-4);var o="";for(var d=0;d<a.length;d++){_=Object.keys(t[a[d]]);for(var s=0;s<_.length;s++){if(e==t[a[d]][_[s]]){o=_[s]}}}if(n!=""){n="&#x"+n}b+='<div class="bt_bb_icon_preview bt_bb_icon_preview_'+i+'" data-icon="'+e+'" data-icon-code="'+n+'"></div>';b+='<div class="bt_bb_iconpicker_select_text">'+o+"</div>";var r=o!=""?"block":"none";b+='<i class="fa fa-close bt_bb_iconpicker_clear" style="display:'+r+'"></i>';b+='<i class="fa fa-angle-down"></i>';b+="</div>";b+='<div class="bt_bb_iconpicker_filter_container">';b+='<input type="text" class="bt_bb_filter" placeholder="'+window.bt_bb_text.filter+'">';b+="</div>";b+='<div class="bt_bb_iconpicker_icons">';for(var l=0;l<a.length;l++){b+='<div class="bt_bb_iconpicker_title">'+a[l]+"</div>";_=Object.keys(t[a[l]]);for(var c=0;c<_.length;c++){var e=t[a[l]][_[c]];var i=e.slice(0,-5);var n=e.substr(-4);b+='<div class="bt_bb_icon_preview bt_bb_icon_preview_'+i+'" data-icon="'+e+'" data-icon-code="&#x'+n+'" title="'+_[c]+'"></div>'}}b+="</div>";b+="</div>";return b};String.prototype.bt_ends_with=function(t){return this.indexOf(t,this.length-t.length)!==-1};window.bt_bb_get_key=function(){var t="bt_bb_"+Math.random().toString();t=t.replace(".","");return t};window.bt_bb_dispatch=function(e,b){try{var a=new Event(b)}catch(t){var a=document.createEvent("Event");a.initEvent(b,false,false)}t(e)[0].dispatchEvent(a)};t(document).ready(function(){if(t("#bt_bb").length>0){window.bt_bb_element_list=BTReact.render(BTReact.createElement(b,{data:window.bt_bb_data}),t("#bt_bb")[0],function(){bt_bb_horizontal_responsive();bt_bb_resize_h(window.bt_bb_data);window.bt_bb_action="refresh_on_ready";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")})}t("body").on("click",".bt_bb_iconpicker_widget_container .bt_bb_iconpicker_select",function(e){t(this).next().toggle();t(this).next().next().toggle()});t("body").on("click",".bt_bb_iconpicker_widget_container .bt_bb_icon_preview",function(e){var b=t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon",t(this).data("icon"));b.attr("data-icon-code",t(this).data("icon-code"));b.removeClass();b.addClass(t(this).attr("class"));t(this).closest(".bt_bb_iconpicker").find("input").val(t(this).data("icon"));t(this).closest(".bt_bb_iconpicker").find("input").trigger("change");t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_iconpicker_select_text").html(t(this).attr("title"));t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_clear").show();t(this).parent().hide();t(this).parent().prev().find("input").val("").trigger("keyup");t(this).parent().prev().hide()});t("body").on("click",".bt_bb_iconpicker_widget_container .bt_bb_iconpicker_clear",function(e){e.stopPropagation();var b=t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon","");b.attr("data-icon-code","");b.parent().find(".bt_bb_iconpicker_select_text").html("");t(this).closest(".bt_bb_iconpicker").find("input").val("");t(this).closest(".bt_bb_iconpicker").find("input").trigger("change");t(this).parent().next().find("input").val("").trigger("keyup");t(this).parent().next().hide();t(this).parent().next().next().hide();t(this).hide()});t("body").on("keyup",".bt_bb_iconpicker_widget_container .bt_bb_filter",function(e){var b=t(this).val();t(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_icons .bt_bb_icon_preview").each(function(){var e=t(this).attr("title");var a=new RegExp(b,"i");if(!a.test(e)){t(this).hide()}else{t(this).show()}})})});t(window).on("focus",function(){var t=localStorage.getItem("bt_bb_cb_items");bt_bb_set_number_items(t===null?0:t)})})(jQuery);function b64EncodeUnicode(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}function b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}